(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"3Icl":function(e,t,a){},JwXx:function(e,t,a){"use strict";(function(e){var n=c(a("Zx67")),i=c(a("kiBT")),r=c(a("OvRC")),l=c(a("pFYg")),s=c(a("C4MV")),o=c(a("woOf"));function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d,u,m=o.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,s.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a("U7vG"),p=w(f);a("fw66");a("3Icl");var v=a("nztU"),y=a("2uFj"),b=w(a("qAHI"));w(a("4GUf"));function w(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,l.default)(t))&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}var N={init:{url:y.MALLAPI+"/item/bests",method:"get"},updateVipUser:{url:y.MALLAPI+"/vip/updateVipUser",method:"POST"}},k=(u=d=function(t){function a(e,t){S(this,a);var i=g(this,(a.__proto__||(0,n.default)(a)).call(this,e));return i.changeState=function(e){i.setState(e)},i.chooseBirth=function(){},i.state={birth:"",birthStart:!1,birthSlideIn:!1,shadySlide:!1,showBirth:!1,showAlert:!1},i}return E(a,f.Component),h(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({showBirth:!0,birthStart:!0,shadySlide:!0,birthSlideIn:!0})},100)}},{key:"componentDidUpdate",value:function(){}},{key:"btnSure",value:function(){this.setState({showAlert:!1,showBirth:!1,birthStart:!1,shadySlide:!1,birthSlideIn:!1})}},{key:"btnBack",value:function(){this.setState({showAlert:!1,showBirth:!0,birthStart:!0,shadySlide:!0,birthSlideIn:!0})}},{key:"render",value:function(){var t=this.state,a=(t.is_vip,t.tabList,t.tabIndex,t.recommendList,t.isagreement,t.remain_days,t.contentList,this.state),n=a.showAlert,i=a.showBirth,r=a.shadySlide,l=(a.showStart,a.showAvatar,a.avatar,a.sex,a.sexStart,a.sexSlideIn,a.birth),s=a.birthStart,o=a.birthSlideIn;a.update,a.isCompanyUser,a.data;return p.default.createElement("div",{"data-page":"vippayok",className:"vip-pay-ok",style:{minHeight:e(window).height()}},i?p.default.createElement("div",{className:"birth-day"},p.default.createElement(C,{showAlert:n,birthStart:s,shadySlide:r,birthSlideIn:o,changeState:this.changeState,birth:l})):null,p.default.createElement("div",{className:"base-content"},p.default.createElement("div",{className:"background-img"},p.default.createElement("img",{className:"bgimg",src:"/src/img/vipPage/vip-img.png",alt:""}),p.default.createElement("p",{className:"text-def text-small"},"支付成功"),p.default.createElement("p",{className:"text-def text-big"},"恭喜您成为泰享会员"),p.default.createElement("p",{className:"text-def"},"建议您关注泰然城公众号，以便获取最新精彩活动！")),p.default.createElement("div",{className:"btn-content"},p.default.createElement("a",{href:"trmall://main?page=home"},p.default.createElement("button",{className:"btn-payok btn-go-home"},"去首页")),p.default.createElement("a",{href:"/vipPage"},p.default.createElement("button",{className:"btn-payok btn-mine"},"我的权益")))),n?p.default.createElement("div",{className:"alert-sure"},p.default.createElement("div",{className:"alert-content"},p.default.createElement("div",{className:"alert-top"},p.default.createElement("div",{className:"alert-title"},"你的生日信息是否已确认？"),p.default.createElement("div",{className:"alert-text"},"泰然城将以此日期为您发放生日福利")),p.default.createElement("div",{className:"alert-btn"},p.default.createElement("button",{className:"alert-btn alert-btn-left",onClick:this.btnSure.bind(this)},"确认"),p.default.createElement("button",{className:"alert-btn alert-btn-right",onClick:this.btnBack.bind(this)},"取消")))):null)}}]),a}(),d.contextTypes={store:p.default.PropTypes.object,isApp:p.default.PropTypes.bool},u);t.default=k;var C=function(t){function a(t){S(this,a);var i=g(this,(a.__proto__||(0,n.default)(a)).call(this,t));i.getSelTime=function(){return{year:parseInt(e(".year-container .swiper-slide-active").text().split("年")[0]),month:parseInt(e(".month-container .swiper-slide-active").text().split("月")[0]),day:parseInt(e(".day-container .swiper-slide-active").text().split("日")[0])}},i.getDayNum=function(e,t){var a=void 0;switch(t){case 1:case 3:case 5:case 7:case 8:case 10:case 12:a=31;break;case 4:case 6:case 9:case 11:a=30;break;case 2:a=e%4==0&&e%100!=0||e%400==0?29:28}return a},i.dayGenerator=function(e,t){for(var a=[],n=i.getDayNum(e,t),r=1;r<=n;r++)a.push(r);return a},i.confirmBirth=function(){var t=e(".year-container .swiper-slide-active").text().split("年")[0]+"-"+e(".month-container .swiper-slide-active").text().split("月")[0]+"-"+e(".day-container .swiper-slide-active").text().split("日")[0],a=i,n=(0,v.getCookie)("token");b.default.request(m({},N.updateVipUser,{headers:{Authorization:"Bearer "+n},data:{birthday:t}})).then(function(e){"200"===e.data.code&&a.props.changeState({birth:t})}),i.props.changeState({showAlert:!0,showBirth:!1,shadySlide:!1,birthSlideIn:!1})},i.getYear=function(){for(var e=[],t=(new Date).getFullYear(),a=t-70;a<=t;a++)e.push(a+"年");return e},i.getMonth=function(){for(var e=[],t=1;t<=12;t++)e.push((t<10?"0"+t:t)+"月");return e};var r=new Date,l=i.props.birth,s=l?l.split("-").map(function(e){return parseInt(e)}):[],o=s.length;return i.state={nowYear:r.getFullYear(),nowMonth:r.getMonth(),nowDay:r.getDate(),yearInit:o?70-(r.getFullYear()-s[0]):70,monthInit:o?s[1]-1:r.getMonth(),dayInit:o?s[2]:r.getDate(),yearCnt:0,monthCnt:0,dayCnt:0,dayArr:i.dayGenerator(o?r.getFullYear():s[0],(o?s[1]-1:r.getMonth())+1)},i}return E(a,f.Component),h(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.nowYear,a=e.nowMonth,n=e.nowDay,i=e.yearInit,r=e.monthInit,l=e.dayInit,s=e.yearCnt,o=e.monthCnt,c=e.dayCnt,d=this,u=new Swiper(".day-container",{preventClicks:!0,direction:"vertical",slideToClickedSlide:!0,slidesPerView:5,centeredSlides:!0,initialSlide:l-1,onSlideChangeEnd:function(e){if(c>0){var i=d.getSelTime(),r=i.year,l=i.month,s=i.day;r===t&&l-1===a&&s>n&&e.slideTo(n-1,200,!0)}c++}}),m=new Swiper(".month-container",{preventClicks:!0,direction:"vertical",slideToClickedSlide:!0,slidesPerView:5,centeredSlides:!0,initialSlide:r,onInit:function(){o++},onSlideChangeEnd:function(e){if(o>0){var i=d.getSelTime(),r=i.year,l=i.month,s=i.day;r===t&&l>a&&e.slideTo(a,200,!0),r===t&&l-1===a&&s>n&&u.slideTo(n-1,200,!0);var c=d.dayGenerator(r,l),m=d.getDayNum(r,l);d.setState({dayArr:c}),u.updateSlidesSize(),(!s||s>m)&&u.slideTo(m-1,200,!0),o++}}});new Swiper(".year-container",{preventClicks:!0,direction:"vertical",slideToClickedSlide:!0,slidesPerView:5,centeredSlides:!0,initialSlide:i,onSlideChangeEnd:function(e){if(s>0){var i=d.getSelTime(),r=i.year,l=i.month,o=i.day;r===t&&l>a&&m.slideTo(a,200,!0),r===t&&l-1===a&&o>n&&u.slideTo(n-1,200,!0);var c=d.dayGenerator(r,l),h=d.getDayNum(r,l);d.setState({dayArr:c}),u.updateSlidesSize(),(!o||o>h)&&u.slideTo(h-1,200,!0)}s++}})}},{key:"render",value:function(){var e=this.props,t=e.birthSlideIn,a=e.birthStart,n=this.state.dayArr,i=this.getYear().map(function(e,t){return p.default.createElement("div",{key:t,className:"swiper-slide"},p.default.createElement("p",{className:"each-year"},e))}),r=this.getMonth().map(function(e,t){return p.default.createElement("div",{key:t,className:"swiper-slide"},p.default.createElement("p",{className:"each-month"},e))}),l=n.map(function(e,t){return p.default.createElement("div",{key:t,className:"swiper-slide"},p.default.createElement("p",{className:"each-day"},(e<10?"0"+e:e)+"日"))});return p.default.createElement("div",{className:"animation-birth"},p.default.createElement("div",{className:"choose-birth "+(a?t?"animation1":"animation2":"")},p.default.createElement("div",{className:"fixed-line c-pa",style:{top:"126px"}}),p.default.createElement("div",{className:"fixed-line c-pa",style:{top:"169px"}}),p.default.createElement("ul",{className:"nav"},p.default.createElement("li",{className:"cancel"},"完善您的个人信息,泰然城为您发放生日福利!"),p.default.createElement("li",{className:"confirm",onClick:this.confirmBirth},"完成")),p.default.createElement("div",{className:"birth-content","data-plugin":"swiper"},p.default.createElement("div",{className:"swiper-container year-container"},p.default.createElement("div",{className:"swiper-wrapper"},i)),p.default.createElement("div",{className:"swiper-container month-container"},p.default.createElement("div",{className:"swiper-wrapper"},r)),p.default.createElement("div",{className:"swiper-container day-container"},p.default.createElement("div",{className:"swiper-wrapper"},l)))))}}]),a}()}).call(this,a("OOjC"))}}]);